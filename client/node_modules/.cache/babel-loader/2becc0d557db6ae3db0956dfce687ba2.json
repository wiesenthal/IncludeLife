{"ast":null,"code":"var _jsxFileName = \"/Users/miles/Documents/github/lifestyleLayout/LifeInclusions/client/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n// client/src/App.js\nimport React from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Item(props) {\n  _s();\n\n  const [checked, setChecked] = React.useState(false);\n\n  function check() {\n    console.log(\"checked\", checked);\n\n    if (!checked) {\n      fetch(\"/inclusion-done\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          inclusion_name: props.text\n        })\n      }).then(() => {\n        props.update();\n        setTimeout(() => {\n          setChecked(false);\n        }, 1000);\n      });\n    }\n\n    setChecked(!checked);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"flex\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: props.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      checked: checked,\n      onChange: check\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 26\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 10\n  }, this);\n}\n\n_s(Item, \"OiiR1BYWvMsLHMiD2uYkeM3TCO0=\");\n\n_c = Item;\n\nfunction App() {\n  _s2();\n\n  const [data, setData] = React.useState(null);\n  const [updateCount, setUpdateCount] = React.useState(0);\n\n  function getTotalDoneCount() {\n    return data.reduce((total, inclusion) => total + inclusion.done_count, 0);\n  }\n\n  function calcProportionDifference(inclusion) {\n    let actualProportion = inclusion.done_count / getTotalDoneCount();\n    return actualProportion - inclusion.expected_proportion;\n  }\n\n  function getOrder() {\n    let d = [...data].sort((a, b) => calcProportionDifference(a) - calcProportionDifference(b));\n    return d.map(inclusion => inclusion.name);\n  }\n\n  React.useEffect(() => {\n    fetch(\"/get-data\").then(res => res.json()).then(data => {\n      setData(data.inclusions);\n    });\n  }, [updateCount]);\n\n  if (!data) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 12\n    }, this);\n  }\n\n  console.log(data);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: getOrder().map(inclusion => /*#__PURE__*/_jsxDEV(Item, {\n      text: inclusion,\n      update: () => setUpdateCount(updateCount + 1)\n    }, inclusion, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(App, \"REbTyEd8+FE+fmO+RW2H7WD9Y3Q=\");\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Item\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","logo","Item","props","checked","setChecked","useState","check","console","log","fetch","method","headers","body","JSON","stringify","inclusion_name","text","then","update","setTimeout","App","data","setData","updateCount","setUpdateCount","getTotalDoneCount","reduce","total","inclusion","done_count","calcProportionDifference","actualProportion","expected_proportion","getOrder","d","sort","a","b","map","name","useEffect","res","json","inclusions"],"sources":["/Users/miles/Documents/github/lifestyleLayout/LifeInclusions/client/src/App.js"],"sourcesContent":["// client/src/App.js\n\nimport React from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\n\nfunction Item(props) {\n  const [checked, setChecked] = React.useState(false);\n  function check() {\n    console.log(\"checked\", checked);\n    if (!checked) {\n      fetch(\"/inclusion-done\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({inclusion_name: props.text})\n      }).then(() => {\n        props.update();\n        setTimeout(() => {setChecked(false)}, 1000);\n      });\n    }\n    setChecked(!checked);\n  }\n  return <div class=\"flex\">\n      <p>{props.text}</p><input type=\"checkbox\" checked={checked} onChange={check}/>\n    </div>\n}\n\nfunction App() {\n  const [data, setData] = React.useState(null);\n  const [updateCount, setUpdateCount] = React.useState(0);\n\n  function getTotalDoneCount() {\n    return data.reduce((total, inclusion) => total + inclusion.done_count, 0);\n  }\n  function calcProportionDifference(inclusion) {\n    let actualProportion = inclusion.done_count / getTotalDoneCount();\n    return actualProportion - inclusion.expected_proportion;\n  }\n  function getOrder() {\n    let d = [...data].sort((a, b) => calcProportionDifference(a) - calcProportionDifference(b));\n    return d.map(inclusion => inclusion.name);\n  }\n  React.useEffect(() => {\n    fetch(\"/get-data\")\n        .then((res) => res.json())\n        .then((data) => {\n          setData(data.inclusions)\n        });\n  }, [updateCount]);\n  if (!data) {\n    return <div>Loading...</div>;\n  }\n  console.log(data);\n\n  return (\n    <div className=\"App\">\n      {getOrder().map(inclusion => \n        <Item \n        key={inclusion}\n        text={inclusion}\n        update={() => setUpdateCount(updateCount + 1)}/>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}