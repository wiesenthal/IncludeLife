{"ast":null,"code":"import _toConsumableArray from\"/Users/miles/Documents/github/lifestyleLayout/LifeInclusions/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/miles/Documents/github/lifestyleLayout/LifeInclusions/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// client/src/App.js\nimport React from\"react\";import logo from\"./logo.svg\";import\"./App.css\";import{googleAuthenticator}from'./auth.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Item(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),checked=_React$useState2[0],setChecked=_React$useState2[1];function check(){console.log(\"checked\",checked);if(!checked){fetch(\"/inclusion-done\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({inclusion_name:props.text})}).then(function(){props.update();setTimeout(function(){setChecked(false);},1000);});}setChecked(!checked);}return/*#__PURE__*/_jsxs(\"div\",{class:\"flex\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:checked,onChange:check}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:\"bold\"},children:props.text}),props.show_count?/*#__PURE__*/_jsxs(\"span\",{style:{color:\"grey\"},children:[\": \",props.done_count]}):null]});}function App(){var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),data=_React$useState4[0],setData=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),updateCount=_React$useState6[0],setUpdateCount=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),showCount=_React$useState8[0],setShowCount=_React$useState8[1];function getTotalDoneCount(){return data.reduce(function(total,inclusion){return total+inclusion.done_count;},0);}function calcProportionDifference(inclusion){var actualProportion=inclusion.done_count/getTotalDoneCount();return actualProportion-inclusion.expected_proportion;}function getOrder(){var d=_toConsumableArray(data).sort(function(a,b){return calcProportionDifference(a)-calcProportionDifference(b);});return d.map(function(inclusion){return inclusion.name;});}React.useEffect(function(){fetch(\"/get-data\").then(function(res){return res.json();}).then(function(data){setData(data.inclusions);});},[updateCount]);if(!data){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}console.log(data);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"googleAuthenticator\",{}),/*#__PURE__*/_jsx(\"div\",{id:\"list\",children:getOrder().map(function(inclusion){return/*#__PURE__*/_jsx(Item,{text:inclusion,done_count:data.find(function(inclusionObj){return inclusionObj.name===inclusion;}).done_count,show_count:showCount,update:function update(){return setUpdateCount(updateCount+1);}},inclusion);})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setShowCount(!showCount);},children:\"Toggle Count Visibility\"})]});}export default App;","map":{"version":3,"names":["React","logo","googleAuthenticator","Item","props","useState","checked","setChecked","check","console","log","fetch","method","headers","body","JSON","stringify","inclusion_name","text","then","update","setTimeout","fontWeight","show_count","color","done_count","App","data","setData","updateCount","setUpdateCount","showCount","setShowCount","getTotalDoneCount","reduce","total","inclusion","calcProportionDifference","actualProportion","expected_proportion","getOrder","d","sort","a","b","map","name","useEffect","res","json","inclusions","find","inclusionObj"],"sources":["/Users/miles/Documents/github/lifestyleLayout/LifeInclusions/client/src/App.js"],"sourcesContent":["// client/src/App.js\n\nimport React from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\n\nimport { googleAuthenticator } from './auth.js';\n\nfunction Item(props) {\n  const [checked, setChecked] = React.useState(false);\n  function check() {\n    console.log(\"checked\", checked);\n    if (!checked) {\n      fetch(\"/inclusion-done\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({inclusion_name: props.text})\n      }).then(() => {\n        props.update();\n        setTimeout(() => {setChecked(false)}, 1000);\n      });\n    }\n    setChecked(!checked);\n  }\n  return <div class=\"flex\">\n      <input type=\"checkbox\" checked={checked} onChange={check}/>\n      <span style={{fontWeight: \"bold\"}}>{props.text}</span>\n      {props.show_count? <span style={{color: \"grey\"}}>: {props.done_count}</span> : null}\n    </div>\n}\n\nfunction App() {\n  const [data, setData] = React.useState(null);\n  const [updateCount, setUpdateCount] = React.useState(0);\n  const [showCount, setShowCount] = React.useState(false);\n\n  function getTotalDoneCount() {\n    return data.reduce((total, inclusion) => total + inclusion.done_count, 0);\n  }\n  function calcProportionDifference(inclusion) {\n    let actualProportion = inclusion.done_count / getTotalDoneCount();\n    return actualProportion - inclusion.expected_proportion;\n  }\n  function getOrder() {\n    let d = [...data].sort((a, b) => calcProportionDifference(a) - calcProportionDifference(b));\n    return d.map(inclusion => inclusion.name);\n  }\n  React.useEffect(() => {\n    fetch(\"/get-data\")\n        .then((res) => res.json())\n        .then((data) => {\n          setData(data.inclusions)\n        });\n  }, [updateCount]);\n  if (!data) {\n    return <div>Loading...</div>;\n  }\n  console.log(data);\n\n  return (\n    <div className=\"App\">\n      <googleAuthenticator />\n      <div id=\"list\">\n        {getOrder().map(inclusion => \n          <Item \n          key={inclusion}\n          text={inclusion}\n          done_count={data.find(inclusionObj => inclusionObj.name === inclusion).done_count}\n          show_count = {showCount}\n          update={() => setUpdateCount(updateCount + 1)}/>\n        )}\n      </div>\n      <button onClick={() => setShowCount(!showCount)}>Toggle Count Visibility</button>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}